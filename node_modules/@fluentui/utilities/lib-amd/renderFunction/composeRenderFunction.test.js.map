{"version":3,"file":"composeRenderFunction.test.js","sourceRoot":"../src/","sources":["renderFunction/composeRenderFunction.test.tsx"],"names":[],"mappings":";;;IAWA,IAAM,UAAU,GAAG,UAAC,KAAoB;QACtC,OAAO,2CAAiB,KAAK,CAAC,KAAK,GAAI,CAAC;IAC1C,CAAC,CAAC;IAEF,IAAM,gBAAgB,GAAG,UAAC,KAAqB,EAAE,aAA8C;QAC7F,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO,IAAI,CAAC;QACd,CAAC;QAED,OAAO,uCAAY,GAAG,IAAE,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAO,CAAC;IAC7E,CAAC,CAAC;IAEF,IAAM,gBAAgB,GAAG,UAAC,KAAqB,EAAE,aAA8C;QAC7F,IAAI,CAAC,KAAK,EAAE,CAAC;YACX,OAAO,IAAI,CAAC;QACd,CAAC;QAED,OAAO,uCAAY,GAAG,IAAE,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAO,CAAC;IAC7E,CAAC,CAAC;IAEF,QAAQ,CAAC,oBAAoB,EAAE;QAC7B,EAAE,CAAC,2BAA2B,EAAE;YAC9B,IAAM,wBAAwB,GAAG,IAAA,6CAAqB,EAAC,gBAAgB,EAAE,UAAU,CAAC,CAAC;YAE7E,IAAA,SAAS,GAAK,IAAA,cAAM,EAAC,0CAAG,wBAAwB,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAI,CAAC,UAA/D,CAAgE;YACjF,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,eAAe,EAAE,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,8CAA8C,EAAE;YACjD,IAAM,4BAA4B,GAAG,IAAA,6CAAqB,EACxD,gBAAgB,EAChB,IAAA,6CAAqB,EAAC,gBAAgB,EAAE,UAAU,CAAC,CACpD,CAAC;YAEM,IAAA,SAAS,GAAK,IAAA,cAAM,EAAC,0CAAG,4BAA4B,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAI,CAAC,UAAnE,CAAoE;YACrF,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,eAAe,EAAE,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+DAA+D,EAAE;YAClE,IAAM,uBAAuB,GAAG,IAAA,6CAAqB,EAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;YAElF,IAAA,SAAS,GAAK,IAAA,cAAM,EAAC,0CAAG,uBAAuB,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,UAAU,CAAC,CAAI,CAAC,UAA1E,CAA2E;YAC5F,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,eAAe,EAAE,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,+BAA+B,EAAE;YAClC,IAAM,uBAAuB,GAAG,IAAA,6CAAqB,EAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;YAElF,IAAA,SAAS,GAAK,IAAA,cAAM,EAAC,0CAAG,uBAAuB,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAI,CAAC,UAA9D,CAA+D;YAChF,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,eAAe,EAAE,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,gDAAgD,EAAE;YACnD,IAAM,uBAAuB,GAAG,IAAA,6CAAqB,EAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;YAE1F,MAAM,CAAC,IAAA,6CAAqB,EAAC,gBAAgB,EAAE,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;QAClG,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC","sourcesContent":["import * as React from 'react';\nimport { render } from '@testing-library/react';\nimport { composeRenderFunction } from './composeRenderFunction';\nimport type { IRenderFunction } from '../IRenderFunction';\n\nimport type { JSXElement } from '../jsx';\n\ninterface IExampleProps {\n  value: string;\n}\n\nconst renderBase = (props: IExampleProps): JSXElement | null => {\n  return <div data-value={props.value} />;\n};\n\nconst renderDecoratorA = (props?: IExampleProps, defaultRender?: IRenderFunction<IExampleProps>): JSXElement | null => {\n  if (!props) {\n    return null;\n  }\n\n  return <div data-a=\"a\">{defaultRender ? defaultRender(props) : null}</div>;\n};\n\nconst renderDecoratorB = (props?: IExampleProps, defaultRender?: IRenderFunction<IExampleProps>): JSXElement | null => {\n  if (!props) {\n    return null;\n  }\n\n  return <div data-b=\"b\">{defaultRender ? defaultRender(props) : null}</div>;\n};\n\ndescribe('composeComponentAs', () => {\n  it('passes Base to DecoratorA', () => {\n    const renderDecoratorAWithBase = composeRenderFunction(renderDecoratorA, renderBase);\n\n    const { container } = render(<>{renderDecoratorAWithBase({ value: 'test' })}</>);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n\n  it('passes Base to DecoratorB through DecoratorA', () => {\n    const renderDecoratorAAndBWithBase = composeRenderFunction(\n      renderDecoratorA,\n      composeRenderFunction(renderDecoratorB, renderBase),\n    );\n\n    const { container } = render(<>{renderDecoratorAAndBWithBase({ value: 'test' })}</>);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n\n  it('passes Base as defaultRender to DecoratorB through DecoratorA', () => {\n    const renderDecoratorAAroundB = composeRenderFunction(renderDecoratorA, renderDecoratorB);\n\n    const { container } = render(<>{renderDecoratorAAroundB({ value: 'test' }, renderBase)}</>);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n\n  it('renders without defaultRender', () => {\n    const renderDecoratorAAroundB = composeRenderFunction(renderDecoratorA, renderDecoratorB);\n\n    const { container } = render(<>{renderDecoratorAAroundB({ value: 'test' })}</>);\n    expect(container.firstChild).toMatchSnapshot();\n  });\n\n  it('avoids recomposing already-composed components', () => {\n    const renderDecoratorAAroundB = composeRenderFunction(renderDecoratorA, renderDecoratorB);\n\n    expect(composeRenderFunction(renderDecoratorA, renderDecoratorB)).toBe(renderDecoratorAAroundB);\n  });\n});\n"]}